## 🤔Transaction 공부하기 
@Transaction 어노테이션은, 해당 어노테이션이 붙어 있는 메서드를 하나의 논리적 단위로 묶어주는 역할을 한다.

## AICD
데이터의 무결성과 안전성을 보장하기 위한 트랜잭션이 가져야 하는 특징이다. <br>
* Atomicitiy (원자성) <br>
  - 트랜잭션은 하나의 작업이며, 나누어 실행할 수 없다. 일부가 실패하면 전체가 실패한다.
* Consistency (일관성) <br>
  - 트랜잭션의 실행 전후로 데이터베이스의 상태가 일관성(제약사항)을 유지해야 한다.
* Isolation (격리성) <br>
  - 트랜잭션이 각각 다른 트랜잭션과 독립되어야 한다.
* Durability (지속성) <br>
  - 트랜잭션이 마무리(커밋)되면 결과가 영속성을 가져야 한다.

## 격리 수준 (Isolation Level)
여러 트랜잭션이 동시에 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 여부를 결정하는 것이다. <br>
* READ_UNCOMMITTED <br>
  - 서로 다른 트랜잭션의 커밋 되지 않은 데이터를 조회 가능
  - Dirty Read = 아직 커밋되지 않은 수정 사항을 읽게 되는 문제
* READ_COMMITTED <br>
  - 커밋 된 데이터를 조회 가능
  - Non-Repeatable Read = 한 번 읽은 열의 내용이 다른 트랜잭션의 커밋으로 바뀌어 있는 문제
* REPEATABLE_READ <br>
  - 커밋되지 않은 정보를 가진 열의 읽기를 방지
  - Phantom Read = 한 트랜잭션 내에서 조회를 진행했을 때, 첫 번째 쿼리에 없던 레코드가 두 번째 쿼리에 나타나는 문제
* SERIALIZABLE <br>
  - 트랜잭션을 순차적으로 실행, 가장 엄격한 격리수준

## 영속성 컨텍스트 (Persistence Context)
JPA를 사용하면 SpringBoot와 데이터베이스 사이에 Entity를 영구 저장하는 해주는 영속성 컨텍스트를 만든다. <br>
SpringBoot가 Entity객체를 매 번 데이터베이스와 주고 받지 않고 어플리케이션 내부에서 관리해 준다.
<hr>
Entity Manager = 영속성 컨텍스트의 Entity를 관리하는 역할이다.

## 낙관적 락 & 비관적 (동시성 문제)
* 낙관적 락
  - 충돌이 일어나지 않을거라고 가정을하고 락을 거는 방식이다.
  - 변경이 없을 경우 커밋, 변경이 있을 경우 롤백한다.
  - 단, 실제로 데이터 베이스의 자원을 잠그지는 않는다.
* 비관적 락
  - 충돌이 자주 일어날 것이므로, 충돌 자체를 방지한다.
  - Shared Lock = 다른 트랜잭션이 읽는것은 가능하지만, 쓰는것은 불가능하다.
  - Exclusive Lock = 다른 트랜잭션이 읽는것이 불가능하고, 쓰는것도 불가능하다.
  - Dead Lock(교착상태) = 각각의 서로 다른 트랜잭션이 서로 락이 풀리기를 기다리는 문제이다.
